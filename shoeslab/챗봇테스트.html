<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="suho/test/css/ì±—ë´‡.css">
    <title>chatbot5</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <style>
        #chat-container {
            width: 300px;
            margin: 20px auto;
            border:1px solid #5a23c8;
            padding: 10px;
            height: 400px;
            overflow-y: scroll;
        }

        #input-container {
            width: 300px;
            margin: 10px auto;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>
<div id="chat-container"></div>
<script>
    $(function () {
        const chatContainer = $('#chat-container');
        let CATEGORY_STATUS = 1;
        let selectedGender = '';
        let selectedShoeType = '';

        function appendMessage(sender, message) {
            const messageElement = $('<div></div>').html(`<strong>${sender}:</strong>${message}`);
            chatContainer.append(messageElement);
            chatContainer.scrollTop(chatContainer.prop('scrollHeight'));
        }

        function í™˜ì˜ì¸ì‚¬() {
            appendMessage('chatbot', '<br>ì‹ ë°œ ì „ë¬¸ ì‡¼í•‘ëª° SHOES LABì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤ ğŸ’–ğŸ’–' +
                '<br>ë¬¸ì˜í•˜ì‹¤ ë‚´ìš©ì„ ìœ„í•´ ì•„ë˜ í•­ëª© ì¤‘ ì…ë ¥í•´ì£¼ì„¸ìš” :)' +
                '<p> 1. ë‚¨ì„±ìš©<br> 2. ì—¬ì„±ìš©<br> 3. í‚¤ì¦ˆìš©');
        }

        function sendMessage(userMessage) {
            appendMessage('User', userMessage);

            if (CATEGORY_STATUS === 1) {
                if (userMessage.toLowerCase().includes('1') || userMessage.toLowerCase().includes('ë‚¨ì„±ìš©')) {
                    selectedGender = 'ë‚¨ì„±ìš©';
                    showSubCategories(['ìŠ¤ë‹ˆì»¤ì¦ˆ','ì¶•êµ¬í™”','ëŸ°ë‹í™”','ìŠ¬ë¦¬í¼','ë“±ì‚°í™”','ìŠ¬ë¦½ì˜¨']);
                    CATEGORY_STATUS = 2;
                } else if (userMessage.toLowerCase().includes('2') || userMessage.toLowerCase().includes('ì—¬ì„±ìš©')) {
                    selectedGender = 'ì—¬ì„±ìš©';
                    showSubCategories(['ìŠ¤ë‹ˆì»¤ì¦ˆ','ëŸ°ë‹í™”','ìŠ¬ë¦¬í¼','ë¶€ì¸ ','í•˜ì´í‚¹ë¶€ì¸ ','ìŠ¬ë¦½ì˜¨']);
                    CATEGORY_STATUS = 2;
                } else if (userMessage.toLowerCase().includes('3') || userMessage.toLowerCase().includes('í‚¤ì¦ˆìš©')) {
                    selectedGender = 'í‚¤ì¦ˆìš©';
                    showSubCategories(['ìŠ¤ë‹ˆì»¤ì¦ˆ','ì¶•êµ¬í™”','ëŸ°ë‹í™”','ìŠ¬ë¦¬í¼','ìŠ¬ë¦½ì˜¨']);
                    CATEGORY_STATUS = 2;
                } else {
                    setTimeout(function () {
                        appendMessage('chatbot', 'ì£„ì†¡í•©ë‹ˆë‹¤. ì…ë ¥í•˜ì‹  ì •ë³´ë¡œëŠ” ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ğŸ˜¥');
                    }, 500);
                }
            } else if (CATEGORY_STATUS === 2) {
                // const selectedCategory = userMessage.toLowerCase();
                if (userMessage.toLowerCase().includes('1') || userMessage.toLowerCase().includes('ìŠ¤ë‹ˆì»¤ì¦ˆ')) {
                    selectedShoeType = 'ìŠ¤ë‹ˆì»¤ì¦ˆ';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('2') || userMessage.toLowerCase().includes('ì¶•êµ¬í™”')) {
                    selectedShoeType = 'ì¶•êµ¬í™”';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('3') || userMessage.toLowerCase().includes('ëŸ°ë‹í™”')) {
                    selectedShoeType = 'ëŸ°ë‹í™”';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('4') || userMessage.toLowerCase().includes('ìŠ¬ë¦¬í¼')) {
                    selectedShoeType = 'ìŠ¬ë¦¬í¼';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('5') || userMessage.toLowerCase().includes('ë“±ì‚°í™”')) {
                    selectedShoeType = 'ë“±ì‚°í™”';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('6') || userMessage.toLowerCase().includes('ìŠ¬ë¦½ì˜¨')) {
                    selectedShoeType = 'ìŠ¬ë¦½ì˜¨';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;


                } else {
                    setTimeout(function () {
                        appendMessage('chatbot', 'ì£„ì†¡í•©ë‹ˆë‹¤. ì…ë ¥í•˜ì‹  ì •ë³´ë¡œëŠ” ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ğŸ˜¥');
                    }, 500);
                }
            }
            userInput.val('');
        }

        function showSubCategories(subCategories) {
            setTimeout(function () {
                appendMessage('<br>chatbot', `<br>ì„ íƒí•œ ì„±ë³„: ${selectedGender}`);
                appendMessage('chatbot', '<br>ì‹ ë°œ ì¢…ë¥˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”ğŸ‘Ÿ');
                for (let k = 0; k < subCategories.length; k++) {
                    chatContainer.append(`${k + 1}.${subCategories[k]}<br>`);
                }
                chatContainer.scrollTop(chatContainer.prop('scrollHeight'));
            }, 500);
        }

        function showSubCategories2(subCategories) {
            setTimeout(function () {
                appendMessage('<br>chatbot', `<br>ì„ íƒí•œ ì‹ ë°œ ì¢…ë¥˜: ${selectedShoeType}`);
                appendMessage('chatbot', '<br>ì…ë ¥í•˜ì‹  ì‹ ë°œ ì •ë³´ì˜ í˜ì´ì§€ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤ğŸ˜ŠğŸ˜Š');
                const link = $('<a></a>')
                    .attr('href', '../../seller/men/man.html')
                    .attr('target', '_blank')
                    .text('ì‹ ë°œ ìƒì„¸ ì •ë³´ ë³´ëŸ¬ ê°€ê¸°');

                chatContainer.append(link);
                chatContainer.scrollTop(chatContainer.prop('scrollHeight'));
            }, 500);
        }

        í™˜ì˜ì¸ì‚¬();

        let inputContainer = $('<div id="input-container"></div>').appendTo('body');
        let userInput = $('<input type="text" id="user-input" placeholder="ë¬´ì—‡ì´ ê¶ê¸ˆí•œê°€ìš”?">').appendTo(inputContainer);
        let sendBtn=$('<button id="send-btn">ì§ˆë¬¸</button>').appendTo(inputContainer);

        sendBtn.click(function () {
            const userMessage=userInput.val();
            sendMessage(userMessage);
        });

        userInput.keypress(function(e) {
            if(e.which===13) {
                const userMessage=userInput.val();
                sendMessage(userMessage);
            }
        });
    });
</script>
</body>
</html>